<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Role & Roll Dice Roller</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>Role &amp; Roll Dice Roller</h1>

  <form id="dice-form">
    <div class="field">
      <label for="total-dice">Total dice:</label>
      <input id="total-dice" type="number" min="1" value="5" required>
      <!-- help icon -->
      <button
        type="button"
        id="help-toggle"
        class="help-icon"
        aria-label="Show/Hide manual"
        aria-expanded="false"
        aria-controls="manual-guide"
      >
        ?
      </button>
    </div>

    <div class="field">
      <label for="special">Special dice:</label>
      <input
        id="special"
        type="text"
        placeholder="e.g. a1, n1 (a = positive, n = negative)"
      >
    </div>

    <div class="field">
      <label for="success">Success:</label>
      <input id="success" type="number" min="0" value="0">
    </div>

    <div class="field">
      <label for="penalty">Penalty:</label>
      <input id="penalty" type="number" min="0" value="0">
    </div>

    <button type="submit">Roll</button>
  </form>

  <!-- Manual / Guide with TH & EN pages -->
  <div id="manual-guide" class="manual hidden">
    <div class="manual-header">
      <h3>‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠ / Manual</h3>
      <div class="manual-lang">
        <button
          type="button"
          class="lang-btn active"
          data-lang="th"
        >TH</button>
        <button
          type="button"
          class="lang-btn"
          data-lang="en"
        >EN</button>
      </div>
    </div>

    <!-- Thai page (default visible) -->
    <div id="manual-th" class="manual-page">
      <ul>
        <li><strong>Total dice</strong> : ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πã‡∏≤‡∏ó‡∏µ‡πà‡∏ó‡∏≠‡∏¢‡πÉ‡∏ô‡∏ä‡∏∏‡∏î‡πÅ‡∏£‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
        <li>
          <strong>Special dice</strong> :
          ‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö <code>aX</code> ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ï‡πã‡∏≤‡∏ö‡∏±‡∏ü‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤ <code>+</code> ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô X ‡∏´‡∏ô‡πâ‡∏≤,
          ‡πÅ‡∏•‡∏∞ <code>nY</code> ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ï‡πã‡∏≤‡∏î‡∏µ‡∏ö‡∏±‡∏ü‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤ <code>-</code> ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Y ‡∏´‡∏ô‡πâ‡∏≤<br>
          ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á <code>a1,a1,n2</code> ‚Üí ‡πÄ‡∏ï‡πã‡∏≤‡∏ö‡∏±‡∏ü 2 ‡∏•‡∏π‡∏Å (‡∏°‡∏µ + ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏•‡∏∞ 1 ‡∏´‡∏ô‡πâ‡∏≤),
          ‡πÄ‡∏ï‡πã‡∏≤‡∏î‡∏µ‡∏ö‡∏±‡∏ü 1 ‡∏•‡∏π‡∏Å (‡∏°‡∏µ - 2 ‡∏´‡∏ô‡πâ‡∏≤) ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ï‡πã‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ï‡πã‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥
        </li>
        <li>
          <strong>Success</strong> : ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡πà‡∏≤‡∏™‡πÄ‡∏ï‡∏ï‡∏±‡∏™/‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ/‡∏Å‡∏≤‡∏£‡∏à‡πà‡∏≤‡∏¢ Will Power
          ‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÑ‡∏õ‡∏ö‡∏ß‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡πÄ‡∏ï‡πã‡∏≤
        </li>
        <li>
          <strong>Penalty</strong> : ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏¥‡∏î‡∏•‡∏ö‡∏à‡∏≤‡∏Å‡∏™‡πÄ‡∏ï‡∏ï‡∏±‡∏™/‡∏î‡∏µ‡∏ö‡∏±‡∏ü
          ‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÑ‡∏õ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ú‡∏•‡πÄ‡∏ï‡πã‡∏≤
        </li>
        <li>
          <strong>‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤</strong> : <code>‚óè</code> = 1 ‡πÅ‡∏ï‡πâ‡∏°,
          <code>‚ìá</code> = 1 ‡πÅ‡∏ï‡πâ‡∏° + ‡∏ó‡∏≠‡∏¢‡πÄ‡∏ï‡πã‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å 1 ‡∏•‡∏π‡∏Å,
          <code>+</code> / <code>-</code> ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ï‡πâ‡∏°‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡πÑ‡∏õ‡∏ö‡∏ß‡∏Å/‡∏•‡∏ö
          ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏ß‡∏° <em>‡∏Å‡πá‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠</em> ‡∏°‡∏µ‡πÅ‡∏ï‡πâ‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡πÅ‡∏ï‡πâ‡∏°
        </li>
      </ul>
      <p>
        ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:<br>
        ‚Ä¢ <code>Total dice: 5</code> ‚Üí ‡πÄ‡∏ï‡πã‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ 5 ‡∏•‡∏π‡∏Å <br>
        ‚Ä¢ <code>Total dice: 5</code>, <code>Special dice: a1, n1</code>
        ‚Üí ‡πÄ‡∏ï‡πã‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 3 ‡∏•‡∏π‡∏Å, ‡πÄ‡∏ï‡πã‡∏≤‡∏ö‡∏±‡∏ü (+ 1 ‡∏´‡∏ô‡πâ‡∏≤) ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 1 ‡∏•‡∏π‡∏Å, ‡πÄ‡∏ï‡πã‡∏≤‡∏î‡∏µ‡∏ö‡∏±‡∏ü (- 1 ‡∏´‡∏ô‡πâ‡∏≤) ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô 1 ‡∏•‡∏π‡∏Å
      </p>
    </div>

    <!-- English page -->
    <div id="manual-en" class="manual-page hidden">
      <ul>
        <li><strong>Total dice</strong>: number of dice rolled in the first pool.</li>
        <li>
          <strong>Special dice</strong>:
          use <code>aX</code> for one advantage die with X <code>+</code> faces,
          <code>nY</code> for one negative die with Y <code>-</code> faces.<br>
          Example: <code>a1,a1,n2</code> ‚Üí 2 adv dice (+1 face), 1 neg die (2 - faces).
          The remaining dice become normal dice so that
          the total equals <em>Total dice</em>.
        </li>
        <li>
          <strong>Success</strong>: extra points from stats/abilities/Will Power, added
          after the dice total.
        </li>
        <li>
          <strong>Penalty</strong>: penalty points from stats/effects, subtracted
          after the dice total.
        </li>
        <li>
          <strong>Dice faces</strong>: <code>‚óè</code> = 1 point,
          <code>‚ìá</code> = 1 point + 1 extra die of the same type next round,
          <code>+</code>/<code>-</code> are tokens that modify the total
          only if there is at least 1 base point.
        </li>
      </ul>
      <p>
        Examples:<br>
        ‚Ä¢ <code>Total dice: 5</code> ‚Üí 5 normal dice<br>
        ‚Ä¢ <code>Total dice: 5</code>, <code>Special dice: a1, n1</code>
        ‚Üí 3 normal, 1 adv die (+1 face), 1 neg die (-1 face)
      </p>
    </div>
  </div>

  <!-- 3D dice box -->
  <h2>3D Dice</h2>
  <div id="dice-box-3d" class="dice3d-container"></div>

  <h2>Result</h2>
  <div id="result"></div>

  <h2>Summary</h2>
  <div id="summary">
    <div><strong>Based score :</strong> <span id="based-score">0</span></div>
    <div>
      <strong>R&amp;R :</strong>
      <span id="rr-count">0</span>
      (+<span id="rr-points">0</span>)
    </div>
    <div>
      <strong>+ token(s) :</strong> <span id="plus-tokens">0</span>
      &nbsp;
      <strong>- token(s) :</strong> <span id="minus-tokens">0</span>
    </div>
    <div>
      <strong>Success :</strong> <span id="stat-success">0</span>
      &nbsp;
      <strong>Penalty :</strong> <span id="stat-penalty">0</span>
    </div>
    <div>
      <strong>Total point(s) :</strong>
      <span id="total-points" class="total-highlight">0</span>
    </div>
  </div>

  <h2 class="history-title">
    <span>History</span>
    <button
      type="button"
      id="history-toggle"
      class="history-toggle"
      aria-label="Show/Hide history"
      aria-expanded="false"
      aria-controls="history-panel"
    >
      üïí
    </button>
  </h2>

  <div id="history-panel" class="history hidden">
    <div id="history-list" class="history-list">
      <p class="history-empty">No rolls yet.</p>
    </div>
  </div>

  <!-- 3D dice (ES module) -->
  <script type="module" src="dice3d.js"></script>
  <!-- R&R logic -->
  <script src="dice.js"></script>
</body>
</html>
